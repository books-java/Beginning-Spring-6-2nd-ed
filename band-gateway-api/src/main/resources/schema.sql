CREATE TABLE IF NOT EXISTS artist
(
  id   BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  name VARCHAR(64) NOT NULL
);
CREATE UNIQUE INDEX IF NOT EXISTS artist_name
  ON artist(name);

CREATE TABLE IF NOT EXISTS song
(
  id        BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  artist_id INT,
  name      VARCHAR(64) NOT NULL,
  votes     INT DEFAULT 0,
  FOREIGN KEY (artist_id) REFERENCES artist (id)
    ON UPDATE CASCADE
);
CREATE UNIQUE INDEX IF NOT EXISTS song_artist
  ON SONG (artist_id, name);